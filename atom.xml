<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>HFRao</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-09-10T07:46:29.484Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>HFRao</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Event_Loop</title>
    <link href="http://yoursite.com/2018/09/10/Event-Loop/"/>
    <id>http://yoursite.com/2018/09/10/Event-Loop/</id>
    <published>2018-09-10T07:40:04.000Z</published>
    <updated>2018-09-10T07:46:29.484Z</updated>
    
    <content type="html"><![CDATA[<h2 id="��Event-Loop̸JS�����л���"><a href="#��Event-Loop̸JS�����л���" class="headerlink" title="��Event Loop̸JS�����л���"></a>��Event Loop̸JS�����л���</h2><blockquote><h3 id="javaScript�����g��߳�"><a href="#javaScript�����g��߳�" class="headerlink" title="javaScript�����ǵ��߳�"></a><strong>javaScript�����ǵ��߳�</strong></h3></blockquote><ul><li><p>���Ƕ�֪��javaScript�����ǵ��̣߳�Ϊʲô���Ƕ��̵߳��أ�����javaScript����Ҫ�������û��Ļ�����DOM�Ĳ������ٶ�javaScript�ж���̣߳�һ���߳���DOM�ڵ�����ӣ�ͬʱ��һ���߳�����ʱɾ����һ���ڵ㣬��ʱ�����Ӧ�����ĸ��߳�Ϊ���أ���ͻᵼ�ºܸ��ӵ�ͬ�����⡣</p></li><li><p>����һ������HTML5�����Web Worker�ı�׼������javaScript���洴��������̣߳����ö��cpu�ļ����������������߳�����������ģ���ȫ�����߳̿��ƣ����Ҳ��ܲ���DOM��javaScript�����߳���worker�̼߳���ͨ���ض��ķ�ʽͨ�ŵģ�postMessageAPI����Ҫͨ�����л����������߳̽����ض������ݣ�</p></li></ul><p><strong>����Web Worker MDN�Ĺٷ������ǣ�</strong></p><p> Web WorkerΪWeb�����ں�̨�߳������нű��ṩ��һ�ּ򵥵ķ������߳̿���ִ��������������û����棬һ��worker��ʹ��һ�����캯��������һ������(e.g. Worker()) ����һ��������JavaScript�ļ�������ļ��������ڹ����߳������еĴ���; workers��������һ��ȫ����������,��ͬ�ڵ�ǰ��window����ˣ�ʹ��window��ݷ�ʽ��ȡ��ǰȫ�ֵķ�Χ (������self) ��һ�� Worker �ڽ����ش���**</p><ul><li>������Դ�����������ǳ���ʱ�Ĺ���ʱ���뵥����һ��Worker�̣߳���������߳����淢��ʲô�����츲�صı仯������Ӱ���javaScript���̣߳�ֻ������������֮�󣬽����ͨ�Ÿ����̣߳�����javaScript�����ǵ��̵߳���һ����һ�㶼û�䣨��ʵ����һ��sharedWorker,����Ͳ��������ˣ�<blockquote><h3 id="javaScript���л���"><a href="#javaScript���л���" class="headerlink" title="javaScript���л���"></a><strong>javaScript���л���</strong></h3></blockquote></li></ul><ul><li>jsִ�������Ϊ<strong>ͬ������</strong>��<strong>�첽����</strong>��ͬ�����������߳���ִ�У��γ�һ��ִ��ջ�����߳�֮�⻹��һ��������У�task queue�������������<strong>�¼������߳�</strong>����ģ�ֻҪ�첽���������н��ʱ���ͻ�����������з���һ���¼�</li><li>һ��ִ��ջ�����е�ͬ������ִ����Ϻ�ϵͳ�ͲŻ�ȥ��ȡ������У���������뵽ִ��ջ��ִ�У�<strong>���������һ���Ƚ��ȳ������ݽṹ</strong>��</li></ul><p>��ͼ�����̺߳�������е�ʾ��ͼ��ͼƬ���Բο�����2�У�<br><img src="https://github.com/shine-HFRao/shine-HFRao.github.io/tree/master/images/js_event_loop.png" alt="image"></p><p>ֻҪ���߳̿��ˣ��ͻ�ȥ��ȡ”�������”�������JavaScript�����л��ơ�������̻᲻���ظ�</p><blockquote><h3 id="�¼�ѭ������"><a href="#�¼�ѭ������" class="headerlink" title="�¼�ѭ������"></a><strong>�¼�ѭ������</strong></h3></blockquote><p>�����ֱ������һ��ͼƬ��Э����⣺���ο���Philip Roberts���ݽ���Help, I��m stuck in an event-loop����ͼƬ���Բο�����2�У�<br><img src="https://github.com/shine-HFRao/shine-HFRao.github.io/tree/master/images/js_event_loop.png1" alt="image"></p><ul><li><p>����ѭ�����Ƶĺ����ǣ�<strong>js�����߳�</strong>��<strong>�¼������߳�</strong></p></li><li><p>���߳�����ʱ�����ִ��ջ��ջ�еĵ���ĳЩapiʱ�������㴥�������󣬻Ὣ�¼����뵽�¼�������ȥ</p></li><li><p>���Ƕ��ڶ�ʱ����<strong>setTimeout��setInterval</strong>����˵����ͨ��<strong>��ʱ�������߳�</strong>�����ƻص������ڵȴ��ض���ʱ�����ӵ��¼�������</p></li></ul><p>��ʱ��Ҫע���һ��������õ�ʱ����</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function()&#123;</span><br><span class="line">    console.log(&apos;2&apos;);</span><br><span class="line">&#125;, 0);</span><br><span class="line"></span><br><span class="line">console.log(&apos;1&apos;);</span><br><span class="line">//ִ�н���� �� ��1�� �� ��2��</span><br></pre></td></tr></table></figure><p>��Ȼ�����Ĵ��������õ�ʱ������0�����Ǹ���W3C��HTML��׼�еĹ涨��ʱ����С��ʱ����õ���4ms������4ms�ļ�����Ϊ4ms����ʹ�ǰ�0ms�������ǻ���ִ�С�1������Ϊ�¼���������������Ҫ�ȵ����߳�ִ������֮���ִ��</p><blockquote><h3 id="setTimeOut��setInterval���¼�ѭ�������е�����"><a href="#setTimeOut��setInterval���¼�ѭ�������е�����" class="headerlink" title="setTimeOut��setInterval���¼�ѭ�������е�����"></a><strong>setTimeOut��setInterval���¼�ѭ�������е�����</strong></h3></blockquote><ul><li><p>���߳�����һ����ʱ����setInterval��ÿ��һ��ʱ�䶼��ִ��һ���ص��������ص������ͻᱻ��ʱ�������̷߳��뵽�¼�������ȥ�������ǵ����߳�ִ��ʱ��ܳ���ʱ����ںü���setInterval���õ�ʱ�������ô�¼������оͻ�����кü���setInterval�Ļص������������߳�ִ�����ȥִ���¼������е��¼�����ô�ѵ��ŵĶ�ʱ���ص������ͻ�����ִ�У��ۼ�ЧӦ����setTimeOutû������������</p></li><li><p>����һ��������ǰ��������С����setInterval�����ǲ�ִ�г��򣬻ص��������ǻᱻ�ŵ��¼�������ȥ�����ǲ��ᱻִ�У�����������Ժ���Щ�ص������ͻᱻһ��ȫ��ִ��</p></li><li>������õķ���������setTimeOut��ģ��setInterval��������requestAnimationFrame</li><li><strong>���䣺JS�߳������ᵽ��JS������setInterval�����Ż��������ǰ�¼���������setInterval�Ļص��������ظ���ӡ���������Ȼ���кܶ����⡣����</strong><blockquote><h3 id="�¼�ѭ�����ף�macrotask��microtask"><a href="#�¼�ѭ�����ף�macrotask��microtask" class="headerlink" title="�¼�ѭ�����ף�macrotask��microtask"></a><strong>�¼�ѭ�����ף�macrotask��microtask</strong></h3></blockquote></li><li>���潲���¼�ѭ��������es5�е�����ǹ����ˣ�����es6�оͻ�����һЩ������<br>�����⣺<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">console.log(&apos;script start&apos;);</span><br><span class="line"></span><br><span class="line">setTimeout(function() &#123;</span><br><span class="line">    console.log(&apos;setTimeout&apos;);</span><br><span class="line">&#125;, 0);</span><br><span class="line"></span><br><span class="line">Promise.resolve().then(function() &#123;</span><br><span class="line">    console.log(&apos;promise1&apos;);</span><br><span class="line">&#125;).then(function() &#123;</span><br><span class="line">    console.log(&apos;promise2&apos;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">console.log(&apos;script end&apos;);</span><br></pre></td></tr></table></figure></li></ul><p>��ִ�е���ȷ˳����:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">script start</span><br><span class="line">script end</span><br><span class="line">promise1</span><br><span class="line">promise2</span><br><span class="line">setTimeout</span><br></pre></td></tr></table></figure><p>���֪ʶ���Լ��Ӵ��Ľ��٣�<a href="http://www.dailichun.com/2018/01/21/js_singlethread_eventloop.html" target="_blank" rel="noopener">�ο�http://www.dailichun.com/2018/01/21/js_singlethread_eventloop.html</a></p><h2 id="�ܽ�"><a href="#�ܽ�" class="headerlink" title="�ܽ�"></a><strong>�ܽ�</strong></h2><h2 id="�ο����ϣ�"><a href="#�ο����ϣ�" class="headerlink" title="�ο����ϣ�"></a><strong>�ο����ϣ�</strong></h2><p><a href="http://www.ruanyifeng.com/blog/2014/10/event-loop.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2014/10/event-loop.html</a><br><a href="http://www.dailichun.com/2018/01/21/js_singlethread_eventloop.html" target="_blank" rel="noopener">http://www.dailichun.com/2018/01/21/js_singlethread_eventloop.html</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;��Event-Loop̸JS�����л���&quot;&gt;&lt;a href=&quot;#��Event-Loop̸JS�����л���&quot; class=&quot;headerlink&quot; title=&quot;��Event Loop̸JS�����л���&quot;&gt;&lt;/a&gt;��Event Loop̸J
      
    
    </summary>
    
    
  </entry>
  
</feed>
